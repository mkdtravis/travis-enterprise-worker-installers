# Airgap install

For an airgap installation, the following packages need to be already installed on the remote machine:
  - jq
  - aufs-tools
  - libltdl7
  - apt-transport-https
  - ca-certificates
  - curl
  - software-properties-common


Docker: https://apt.dockerproject.org/repo/pool/main/d/docker-engine/

## Installation instructions

On an Ubuntu machine which is connected to the Internet, please run the following script:


```bash
$ bash pull-images.sh
```

This collects:

- All build environment Docker images
- travis-worker
- Auxiliary tools, which are required to operate and run travis-worker

To setup the worker machine, please copy over the following files and folders:

- `installer.sh` (from this repository)
- `aux_tools.tar.gz` (generated by `pull-images.sh`)
- `docker_images` (This contains all necessary Docker images)

The collected files then need to be copied over to the worker machine(s) into a separate folder into a separate folder. Then, run the installer like this:

```bash
$ sudo bash installer.sh --travis_enterprise_host="<your travis ci enterprise host>" --travis_enterprise_security_token="<security token>" --airgap_directory=/home/ubuntu/airgap
```

Note the last parameter, `--airgap_directory`, this points to the directory which holds the build environment Docker images and the `aux_tools.tar.gz` archive. The path to this directory needs to be absolute
